# =============================================================================
# CODER DEVELOPMENT PLATFORM - MODULAR DOCKER COMPOSE CONFIGURATION
# =============================================================================
# This is the main orchestration file that includes all service modules
# 
# Usage:
#   Run everything (default): docker compose up -d
#   Only Coder stack: docker compose --profile dev up -d
#   Add proxy services: docker compose --profile dev --profile proxy up -d
#
# Available profiles:
#   - all: Default profile for most services (personal is opt-in)
#   - dev: Coder platform + socat proxy
#   - proxy: Traefik reverse proxy + Cloudflare tunnel (legacy)
#   - networking: Traefik + Pi-Hole (local DNS + reverse proxy)
#   - external: Cloudflare tunnel (public HTTPS access)
#   - dev-tools: Docker registry cache
#   - ai: AI services (chat, search, image generation)
#   - productivity: NocoDB, Paperless-ngx, N8N
#   - automation: Home Assistant
#   - personal: Mealie, Firefly III, wger (opt-in)
#   - monitoring: Uptime Kuma
# =============================================================================

# Set default profiles to include 'all' if not specified.
# GPU services are opt-in via: docker compose --profile gpu up -d
x-default-profile: &default-profile
  - all

include:
  - compose/docker-compose.core.yml
  - compose/docker-compose.ai.yml
  - compose/docker-compose.dev.yml
  - compose/docker-compose.productivity.yml
  - compose/docker-compose.networking.yml
  - compose/docker-compose.automation.yml
  - compose/docker-compose.media.yml
  - compose/docker-compose.personal.yml
  - compose/docker-compose.monitoring.yml

# Shared network for inter-service communication
networks:
  shared-network:
    driver: bridge
    name: shared-network
